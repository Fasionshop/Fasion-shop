<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö - Fasion shop</title>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <style>
    /* üî• ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÄ‡∏õ‡πá‡∏ô Sarabun üî• */
    body { margin:0; font-family:'Sarabun',sans-serif; background:#f5f5f5; display:flex; flex-direction:column; height:100vh; }
    
    .header { background:white; padding:20px 40px; display:flex; justify-content:space-between; box-shadow:0 2px 5px rgba(0,0,0,0.05); align-items:center; }
    .main-content { background:#ee4d2d; flex-grow:1; display:flex; justify-content:center; align-items:center; padding:20px; }
    .auth-card { background:white; width:100%; max-width:400px; padding:30px; border-radius:4px; box-shadow:0 4px 10px rgba(0,0,0,0.2); }
    
    .tabs { display:flex; margin-bottom:20px; border-bottom:1px solid #eee; }
    .tab-item { flex:1; text-align:center; padding:10px; cursor:pointer; color:#888; font-family: 'Sarabun', sans-serif; }
    .tab-item.active { color:#ee4d2d; border-bottom:2px solid #ee4d2d; font-weight:600; }
    
    input { width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; box-sizing:border-box; border-radius:2px; font-family: 'Sarabun', sans-serif; font-size: 1rem; }
    button { width:100%; background:#ee4d2d; color:white; padding:12px; border:none; cursor:pointer; font-size:1.1rem; border-radius:2px; transition:0.3s; font-family: 'Sarabun', sans-serif; font-weight: 600; }
    button:hover { opacity: 0.9; }
    button:disabled { background:#ccc; }
    
    .forgot-link { display: block; text-align: right; margin-bottom: 15px; color: #666; font-size: 0.9rem; text-decoration: none; }
    .forgot-link:hover { color: #ee4d2d; text-decoration: underline; }
    
    .error { color:red; font-size:0.9rem; text-align:center; margin-bottom:10px; display:none; }
    .success { color:green; font-size:0.9rem; text-align:center; margin-bottom:10px; display:none; }
    .back-btn { background: #ddd; color: #333; margin-top: 10px; }

    .separator { display: flex; align-items: center; margin: 20px 0; color: #ccc; font-size: 0.9rem; }
    .separator::before, .separator::after { content: ""; flex: 1; border-bottom: 1px solid #eee; }
    .separator span { padding: 0 10px; }

    .social-btn {
      width: 100%; padding: 10px; border: 1px solid #ddd; background: white; 
      border-radius: 2px; cursor: pointer; font-size: 0.95rem; display: flex; 
      align-items: center; justify-content: center; gap: 8px; color: #db4437; border-color: #db4437;
      font-family: 'Sarabun', sans-serif; font-weight: 500;
    }
    .social-btn:hover { background: #fff5f5; }
  </style>
</head>
<body>
  <div class="header"><h1 style="color:#ee4d2d; margin:0;">Fasion Login</h1></div>
  <div class="main-content">
    <div class="auth-card">
      
      <div class="tabs" id="tabContainer">
        <div class="tab-item active" onclick="switchTab('login')">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</div>
        <div class="tab-item" onclick="switchTab('register')">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà</div>
      </div>

      <div id="errMsg" class="error"></div>
      <div id="successMsg" class="success"></div>

      <form id="loginForm" onsubmit="doLogin(event)">
        <input type="email" id="lEmail" placeholder="Email" required>
        <input type="password" id="lPass" placeholder="Password" required>
        <a href="#" class="forgot-link" onclick="switchTab('reset')">‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?</a>
        <button id="lBtn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>

        <div class="separator"><span>‡∏´‡∏£‡∏∑‡∏≠</span></div>
        <button type="button" class="social-btn" onclick="loginGoogle()">
          <i class="fab fa-google"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google
        </button>
      </form>

      <form id="regForm" onsubmit="doReg(event)" style="display:none;">
        <input type="email" id="rEmail" placeholder="Email" required>
        <input type="password" id="rPass" placeholder="Password (6+ ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)" required minlength="6">
        <input type="password" id="rPass2" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô Password" required>
        <button id="rBtn">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
      </form>

      <form id="resetForm" onsubmit="doReset(event)" style="display:none;">
        <h3 style="text-align:center; color:#555; margin-top:0;">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h3>
        <p style="font-size:0.95rem; color:#777; text-align:center;">‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</p>
        <input type="email" id="resetEmail" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" required>
        <button id="resetBtn">‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
        <button type="button" class="back-btn" onclick="switchTab('login')">‡∏Å‡∏•‡∏±‡∏ö</button>
      </form>

    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyA7lELq82KxJ0sFDf6jKmWPDFKpKqHJp0c",
      authDomain: "king007-c72e2.firebaseapp.com",
      projectId: "king007-c72e2",
      storageBucket: "king007-c72e2.firebasestorage.app",
      messagingSenderId: "136587774092",
      appId: "1:136587774092:web:4ee67ff03cdee67bb393a9",
      measurementId: "G-K39CYF7766"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    auth.getRedirectResult().then((result) => {
      if (result.user) {
        window.location.href = 'shop.html';
      }
    }).catch((error) => {
      console.error(error);
      showErr("Google Login Error: " + error.message);
    });

    auth.onAuthStateChanged(u => { if(u) window.location.href='shop.html'; });

    async function loginGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider();
      try {
        await auth.signInWithRedirect(provider); 
      } catch (error) {
        console.error(error);
        showErr("‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Google ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: " + error.message);
      }
    }

    function switchTab(m) {
      document.getElementById('errMsg').style.display='none';
      document.getElementById('successMsg').style.display='none';
      const t=document.getElementById('tabContainer');
      ['loginForm','regForm','resetForm'].forEach(id=>document.getElementById(id).style.display='none');
      
      if(m==='login') {
        document.getElementById('loginForm').style.display='block'; t.style.display='flex';
        document.querySelectorAll('.tab-item')[0].classList.add('active');
        document.querySelectorAll('.tab-item')[1].classList.remove('active');
      } else if(m==='register') {
        document.getElementById('regForm').style.display='block'; t.style.display='flex';
        document.querySelectorAll('.tab-item')[0].classList.remove('active');
        document.querySelectorAll('.tab-item')[1].classList.add('active');
      } else {
        document.getElementById('resetForm').style.display='block'; t.style.display='none';
      }
    }

    async function doLogin(e) {
      e.preventDefault();
      const btn = document.getElementById('lBtn'); btn.disabled=true; btn.innerText="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤...";
      try { await auth.signInWithEmailAndPassword(document.getElementById('lEmail').value, document.getElementById('lPass').value); }
      catch(err) { showErr("‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"); btn.disabled=false; btn.innerText="‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö"; }
    }

    async function doReg(e) {
      e.preventDefault();
      const p1 = document.getElementById('rPass').value, p2 = document.getElementById('rPass2').value;
      if(p1!==p2) return showErr("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô");
      const btn = document.getElementById('rBtn'); btn.disabled=true; btn.innerText="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏°‡∏±‡∏Ñ‡∏£...";
      try { await auth.createUserWithEmailAndPassword(document.getElementById('rEmail').value, p1); alert("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!"); }
      catch(err) { showErr(err.message); btn.disabled=false; btn.innerText="‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å"; }
    }

    async function doReset(e) {
      e.preventDefault();
      const email = document.getElementById('resetEmail').value;
      const btn = document.getElementById('resetBtn'); btn.disabled=true; btn.innerText="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...";
      try {
        await auth.sendPasswordResetEmail(email);
        document.getElementById('successMsg').innerText = "‚úÖ ‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏õ‡∏ó‡∏µ‡πà "+email+" ‡πÅ‡∏•‡πâ‡∏ß";
        document.getElementById('successMsg').style.display='block';
        document.getElementById('errMsg').style.display='none';
        btn.disabled=false; btn.innerText="‡∏™‡πà‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á";
      } catch(err) { showErr("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ"); btn.disabled=false; btn.innerText="‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï"; }
    }

    function showErr(t) { const e=document.getElementById('errMsg'); e.innerText=t; e.style.display='block'; document.getElementById('successMsg').style.display='none'; }
  </script>
</body>
</html>